var Gauge=function(a,b){var c=this;$.extend(c,{options:{"foreground-color":"#333","background-color":"#ccc","foreground-width":6,"background-width":8,max:100,value:0},holder:a}),c.init(b)};$.extend(Gauge.prototype,{init:function(a){var b=this;return b.options=$.extend(b.options,a),b.fetchDataAttributes().initPaper().draw(),b.holder.get(0).gauge=b,b.trigger("dcylabs.gauge.initialized"),b},fetchDataAttributes:function(){var a=this;return $.each(["foreground-color","background-color","foreground-width","background-width","value"],function(b,c){a.holder.data(c)&&(a.options[c]=a.holder.data(c))}),a},trigger:function(a,b){var c=this;return c.holder.trigger(a,b),c},initPaper:function(){var a=this;return a.width=Math.min(a.holder.width(),a.holder.height()),a.paper=new Raphael(a.holder.get(0),a.width,a.width),a.paper.customAttributes.arc=function(b,c,d){var e,f=360/c*b,g=(90-f)*Math.PI/180,h=a.width/2+d*Math.cos(g),i=a.width/2-d*Math.sin(g);return e=c==b?[["M",a.width/2,a.width/2-d],["A",d,d,0,1,1,a.width/2-.1,a.width/2-d]]:[["M",a.width/2,a.width/2-d],["A",d,d,0,+(f>180),1,h,i]],a.trigger("dcylabs.gauge.animate",[b,c]),{path:e}},a},drawBackground:function(a){var b=this,c=Math.max(b.options["foreground-width"],b.options["background-width"])/2,d=b.paper.circle(b.width/2,b.width/2,b.width/2-c);return d.attr({"stroke-width":b.options["background-width"],stroke:b.options["background-color"]}),b},drawForeground:function(){var a=this,b=Math.max(a.options["foreground-width"],a.options["background-width"])/2;return a.progressPath=a.paper.path().attr({arc:[0,a.options.max,a.width/2-b],"stroke-width":a.options["foreground-width"],stroke:a.options["foreground-color"]}),a.setValue(a.options.value)},draw:function(){var a=this;return a.drawBackground(),a.drawForeground(),a},setValue:function(a){var b=this,c=Math.max(b.options["foreground-width"],b.options["background-width"])/2;return b.progressPath.animate({arc:[a,b.options.max,b.width/2-c]},900,">",function(){b.trigger("dcylabs.gauge.changed",[a])}),b}}),$(document).ready(function(){$.fn.Gauge=function(a){return new Gauge(this,a)}});